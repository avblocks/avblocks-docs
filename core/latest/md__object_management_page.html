<!-- HTML header for doxygen 1.8.7-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<title>AVBlocks for C++: Object Management</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="extra-doxygen.css" rel="stylesheet" type="text/css"/>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VR60RBWZS1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-VR60RBWZS1');
</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">AVBlocks for C++
   &#160;<span id="projectnumber">3.0</span>
   </div>
   <div id="projectbrief">Audio and Video Software Development Kit</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md__object_management_page.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Object Management </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="object_management"></a>
Object Management</h1>
<h2><a class="anchor" id="object_management_ref"></a>
Objects with reference count management</h2>
<p>These objects keep an internal reference count which is controlled via the <a class="el" href="classprimo_1_1_reference.html" title="Base class for all objects that require reference management.">primo::Reference</a> interface. The count is increased via <a class="el" href="classprimo_1_1_reference.html#a32bf3bb7985194840714fbc6d737edee">Reference::retain</a> and decreased via <a class="el" href="classprimo_1_1_reference.html#a8de62834069c405b6e91b432383868b9">Reference::release</a>.</p>
<p>By convention when an object with a reference count of 1 is released it is destroyed. As part of the destruction process the object releases all other objects that it has retained itself.</p>
<h3><a class="anchor" id="object_management_ref__create"></a>
Creating Objects</h3>
<p>An AVBlocks object is normally created with one of the AVBlocks creating functions. Those are all functions that begin with the word <em><b>create</b></em> in the C++ API, for example <a class="el" href="namespaceprimo_1_1avblocks_1_1_library.html#aa94ca8ff43a6cf272f4fe501c995369c">Library::createTranscoder</a> and <a class="el" href="namespaceprimo_1_1avblocks_1_1_library.html#a4ad5c29c8ced14f50caacedc2944c809">primo::avblocks::Library::createMediaSocket</a>.</p>
<p>Another way to create new object instances is by using the <em><b>clone</b></em> method provided by some objects (like <a class="el" href="classprimo_1_1codecs_1_1_audio_stream_info.html#ad52adf2ff2e2d4d2d184c8609c710e76">AudioStreamInfo::clone</a> and <a class="el" href="classprimo_1_1codecs_1_1_video_stream_info.html#a432ab66b98f5041ee28951a4624ae865">VideoStreamInfo::clone</a>).</p>
<p>An object that is created by one of the methods described above is reference counted. Its initial reference count is 1. The user code is responsible for managing such an object and it should be released when it is not needed anymore.</p>
<h3><a class="anchor" id="object_management_ref__func_params"></a>
Passing Objects as Function Parameters</h3>
<p>When an object is passed as a parameter to an AVBlocks function it may or may not be retained by the function. This depends on how the parameter is used in the Library and this is stated clearly in the documentation.</p>
<p>If the object will be used by AVBlocks after a function returns then it is retained by the Library. For example, when a <a class="el" href="classprimo_1_1avblocks_1_1_media_pin.html">MediaPin</a> object is passed to <a class="el" href="classprimo_1_1avblocks_1_1_media_pin_list.html#a1dfeacabff7e6d64e3eb39623428a6c4">MediaPinList::add</a> it is retained since it becomes part of the list.</p>
<p>If the passed object is used only within a function then it is not retained. For example, when a <a class="el" href="classprimo_1_1codecs_1_1_media_sample.html">MediaSample</a> object is passed to <a class="el" href="classprimo_1_1avblocks_1_1_transcoder.html#abb8fa7942b3e84e0275c793dfbe2c3a0">Transcoder::push</a> it is not retained because it is used only within the push method.</p>
<h3><a class="anchor" id="object_management_ref__func_return"></a>
Returning Objects from Functions</h3>
<p>A reference counted object can be returned either as a result of a creating operation (see <a class="el" href="md__object_management_page.html#object_management_ref__create">Creating Objects</a> above) or because the object already exists and it is being accessed.</p>
<p>As already mentioned when a new object is created the user code is responsible to release it when it's not needed anymore. But when a reference counted object is simply accessed the user code should not release it. It should do so only if it has previously retained the object. This is an option that can be used when the returned object must be detached from the container (for example the client code may want to keep a <a class="el" href="classprimo_1_1avblocks_1_1_media_pin.html">MediaPin</a> object even when the <a class="el" href="classprimo_1_1avblocks_1_1_media_socket.html">MediaSocket</a> that holds it is destroyed).</p>
<h2><a class="anchor" id="object_management_not_ref"></a>
Objects without reference count management</h2>
<p>The objects that fall in this category cannot be created separately by the user code. They exist only in the context of another AVBlocks object and cannot be detached from it. Their lifetime depends only on the object that holds them.</p>
<p>Currently those objects are <a class="el" href="classprimo_1_1avblocks_1_1_media_pin_list.html">MediaPinList</a>, <a class="el" href="classprimo_1_1avblocks_1_1_media_socket_list.html">MediaSocketList</a>, <a class="el" href="classprimo_1_1codecs_1_1_meta_attribute_list.html">MetaAttributeList</a> and <a class="el" href="classprimo_1_1codecs_1_1_meta_picture_list.html">MetaPictureList</a>. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.7-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
    <a href="http://primosoftware.com" target="_blank">(c) Primo Software. All rights reserved.</a>
    </li>
  </ul>
</div>
</body>
</html>
